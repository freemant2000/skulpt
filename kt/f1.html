<html>
<head>
<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
<script src="../dist/skulpt.min.js" type="text/javascript"></script>
<script src="../dist/skulpt-stdlib.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
  initPython();
  $("#run").click(function() {
    runPython("code");
  });
  $("#run2").click(function() {
    runPython("code2");
  });
  $("#run3").click(function() {
    runPython("code3");
  });
});
function outf(txt) {
  console.log(txt);
}
function br(x) {
  if (Sk.builtinFiles==undefined || Sk.builtinFiles["files"][x]==undefined) 
    throw "File not found: "+x;
  return Sk.builtinFiles["files"][x];
}
function initPython() {
  Sk.configure({output:outf, read:br, retainglobals:true});
}
function runPython(codeId) {
  var prog=$("#"+codeId).val();
  var prom=Sk.misceval.asyncToPromise(function() {
    return Sk.importMainWithBody("<stdin>", false, prog, true);
  });
  prom.then(function(mod) {
    console.log('success');
  }, function(err) {
    console.log(err.toString());
  });
}
</script>
</head>
<body>
<textarea id="code" rows="10" cols="40">
</textarea>
<button id="run">Run</button>
<br>
<textarea id="code2" rows="10" cols="40">
</textarea>
<<button id="run2">Run</button>
<br>
<textarea id="code3" rows="10" cols="40">
</textarea>
<<button id="run3">Run</button>
<p>
<canvas id="cv" width="300" height="200">
</canvas>
</body>
</html>
